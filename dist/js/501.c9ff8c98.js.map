{"version":3,"file":"js/501.c9ff8c98.js","mappings":"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","sources":["webpack://lite/./src/views/gallery/more.vue","webpack://lite/./src/bridge/gallery/list.js","webpack://lite/src/views/gallery/more.vue","webpack://lite/./src/views/gallery/more.vue?1ccb","webpack://lite/./src/views/gallery/more.vue?5fbc","webpack://lite/../../../src/components/VGrid/VSpacer.ts"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('lay-header',{attrs:{\"showBack\":true,\"tBarColor\":\"#FFFFFF\",\"txtTitle\":_vm.$t('gallery.my-pic'),\"isGetingItems\":_vm.isGetingItems}},[_c('v-layout',{staticClass:\"pt-9 px-5 lay-body\",attrs:{\"column\":\"\"}},_vm._l((_vm.items),function(item,index){return _c('v-layout',{key:index,attrs:{\"column\":\"\"}},[(\n          index == 0 ||\n          _vm.items[index - 1].startDate.substring(0, 6) !==\n            _vm.items[index].startDate.substring(0, 6)\n        )?_c('span',{staticClass:\"txt-month\"},[_vm._v(_vm._s(_vm.$t(\"common.yyyyMM\", { year: item.startDate.substring(0, 4), month: item.startDate.substring(4, 6), })))]):_vm._e(),_c('v-layout',{staticClass:\"lay-date\",attrs:{\"align-center\":\"\"}},[_c('span',{staticClass:\"txt-num\"},[_vm._v(\"#\"+_vm._s(item.logId))]),_c('span',{staticClass:\"txt-date\"},[_vm._v(_vm._s(_vm.getDateFormat(item.startDate)))]),(item.majorLocation)?_c('v-layout',[_c('img',{staticClass:\"ml-2\",attrs:{\"src\":require(\"@/assets/images/ic-location-g.svg\")}}),_c('span',{staticClass:\"txt-loc\"},[_vm._v(_vm._s(_vm.$i18n.locale == 'en' ? item.majorLocationEn : item.majorLocation))])]):_vm._e(),_c('v-spacer'),(item.pics && item.pics.length)?_c('span',{staticClass:\"txt-more\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return (() => {\n              _vm.pushRouter({ name: 'gallList', params: { seq: item.logId } });\n            }).apply(null, arguments)}}},[_vm._v(_vm._s(_vm.$t(\"gallery.more\"))+\" \")]):_vm._e()],1),_c('c-pic-group',{attrs:{\"maxImg\":3,\"logId\":item.logId,\"pics\":item.pics},on:{\"update:pics\":function($event){return _vm.$set(item, \"pics\", $event)}}})],1)}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import uuid from \"uuid\";\nimport nativeBridge from \"@/plugins/nativeBridge\";\nimport allCount from \"../count\";\n\nconst bridge = {\n    request: async (pageNo = 1, pageSize = 5) => {\n        let retData = {\n            isSuccess: false,\n            errorMsg: '',\n            list: null,\n            allCount: 0\n        };\n        try {\n            retData.allCount = await allCount.request(\"SELECT COUNT(*) AS cnt FROM TB_LOG\", \"cnt\")\n        } catch (error) {\n            throw error\n        }\n        let query = `   \n            SELECT \n                *\n            FROM \n                TB_LOG \n            ORDER BY\n                startDate DESC \n            LIMIT ${pageSize} OFFSET ${pageSize * (pageNo - 1)}\n        `\n        // \" SELECT \" +\n        // \"   l.*,\" +\n        // \"   GROUP_CONCAT(m.fileName, ', ') as uris \" +\n        // \" FROM \" +\n        // \"   TB_LOG as l \" +\n        // \" LEFT JOIN \" +\n        // \"   TB_MEDIA as m \" +\n        // \" ON \" +\n        // \"   l.logId = m.logId \" +\n        // \" GROUP BY \" +\n        // \"   l.logId\" +\n        // \" ORDER BY \" +\n        // \"   l.startDate DESC\"\n        return new Promise((resolve, reject) => {\n            const callbackUUID = `API_GETLIST_CALLBACK_${uuid().replace(/-/gi, \"\")}`;\n            nativeBridge.sqlite(JSON.stringify({ cmd: \"selectQuery\", query: query }), callbackUUID)\n            window[`${callbackUUID}`] = (value) => {\n                try {\n                    if (value) {\n                        const ret = JSON.parse(value);\n                        retData.isSuccess = ret.result\n                        retData.errorMsg = ret.error\n                        retData.list = ret.data\n                        resolve(retData);\n                    } else {\n                        reject();\n                    }\n                } catch (error) {\n                    reject(error);\n                }\n                delete window[`${callbackUUID}`];\n            };\n        });\n    }\n}\nexport default bridge","<template>\n  <lay-header\n    :showBack=\"true\"\n    tBarColor=\"#FFFFFF\"\n    :txtTitle=\"$t('gallery.my-pic')\"\n    :isGetingItems=\"isGetingItems\"\n  >\n    <v-layout column class=\"pt-9 px-5 lay-body\">\n      <v-layout column v-for=\"(item, index) in items\" :key=\"index\">\n        <span\n          class=\"txt-month\"\n          v-if=\"\n            index == 0 ||\n            items[index - 1].startDate.substring(0, 6) !==\n              items[index].startDate.substring(0, 6)\n          \"\n          >{{\n            $t(\"common.yyyyMM\", {\n              year: item.startDate.substring(0, 4),\n              month: item.startDate.substring(4, 6),\n            })\n          }}</span\n        >\n        <v-layout class=\"lay-date\" align-center>\n          <span class=\"txt-num\">#{{ item.logId }}</span>\n          <span class=\"txt-date\">{{ getDateFormat(item.startDate) }}</span>\n          <v-layout v-if=\"item.majorLocation\">\n            <img class=\"ml-2\" src=\"@/assets/images/ic-location-g.svg\" />\n            <span class=\"txt-loc\">{{ $i18n.locale == 'en' ? item.majorLocationEn : item.majorLocation }}</span>\n            <!-- <span class=\"txt-loc\">{{ item.majorLocation.split(\",\")[1] }}</span> -->\n          </v-layout>\n          <v-spacer />\n          <span\n            v-if=\"item.pics && item.pics.length\"\n            class=\"txt-more\"\n            @click.prevent.stop=\"\n              () => {\n                pushRouter({ name: 'gallList', params: { seq: item.logId } });\n              }\n            \"\n            >{{ $t(\"gallery.more\") }}\n          </span>\n        </v-layout>\n        <c-pic-group :maxImg=\"3\" :logId=\"item.logId\" :pics.sync=\"item.pics\" />\n      </v-layout>\n    </v-layout>\n  </lay-header>\n</template>\n\n<script>\nimport cPicGroup from \"@/components/cPicGroup.vue\";\nimport GALLERY_LIST from \"@/bridge/gallery/list\";\nexport default {\n  components: { cPicGroup },\n  data() {\n    return {\n      pageNo: 1,\n      allCount: 0,\n      items: [],\n      isGetingItems: false,\n    };\n  },\n  computed: {},\n  watch: {},\n  created() {},\n  mounted() {\n    window.addEventListener(\"scroll\", this.handleScroll);\n    this.getItems();\n  },\n  destroyed() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  },\n  methods: {\n    async getItems(page = 1) {\n      if (this.isGetingItems) {\n        return;\n      }\n      this.isGetingItems = true;\n      await GALLERY_LIST.request(page)\n        .then((v) => {\n          this.pageNo = page;\n          if (page == 1) {\n            this.items.splice(0, this.items.length);\n          }\n          this.allCount = v.allCount;\n          this.items.push(...v.list);\n          this.isGetingItems = false;\n\n          setTimeout(() => {\n            var target = document.children[0];\n            this.checkNext(target);\n          }, 300);\n        })\n        .catch(() => {\n          this.isGetingItems = false;\n        });\n    },\n    handleScroll(event) {\n      let target = event.target.children[0];\n      this.checkNext(target);\n    },\n    checkNext(target) {\n      if (\n        this.items.length < this.allCount &&\n        target &&\n        target.scrollHeight - target.clientHeight - 80 < target.scrollTop\n      ) {\n        this.getItems(this.pageNo + 1);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/sass/app.scss\";\n.lay-body {\n  .txt-month {\n    font-family: \"PP Pangram Sans\";\n    font-style: normal;\n    font-weight: 400;\n    font-size: 28px;\n    line-height: 32px;\n    letter-spacing: -0.022em;\n    color: #000000;\n    margin-bottom: pxToRem(20px);\n  }\n  .lay-pic {\n    overflow: hidden;\n    margin-bottom: pxToRem(48px);\n  }\n  .lay-date {\n    flex: none;\n    .txt-num {\n      font-family: \"PP Pangram Sans\";\n      font-style: normal;\n      font-weight: 400;\n      font-size: pxToRem(18px);\n      line-height: pxToRem(28px);\n      color: #64dee4;\n    }\n    .txt-date {\n      font-family: \"PP Pangram Sans\";\n      font-style: normal;\n      font-weight: 400;\n      font-size: pxToRem(18px);\n      line-height: pxToRem(28px);\n      color: #000000;\n      margin-left: 6px;\n    }\n    .txt-loc {\n      font-style: normal;\n      font-weight: 400;\n      font-size: pxToRem(13px);\n      line-height: pxToRem(18px);\n      letter-spacing: -0.01em;\n      color: #868e96;\n    }\n    .txt-more {\n      font-family: \"PP Pangram Sans\";\n      font-style: normal;\n      font-weight: 400;\n      font-size: pxToRem(13px);\n      line-height: pxToRem(15px);\n      text-align: right;\n      letter-spacing: -0.022em;\n      color: #868e96;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./more.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./more.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./more.vue?vue&type=template&id=aa0b6d46&scoped=true\"\nimport script from \"./more.vue?vue&type=script&lang=js\"\nexport * from \"./more.vue?vue&type=script&lang=js\"\nimport style0 from \"./more.vue?vue&type=style&index=0&id=aa0b6d46&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa0b6d46\",\n  null\n  \n)\n\nexport default component.exports","import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n"],"names":["attrs","_c","staticClass","year","startDate","substring","month","_vm","_s","require","on","click","$event","preventDefault","pushRouter","name","params","seq","logId","apply","arguments","_v","item","staticRenderFns","render","bridge","request","async","pageNo","pageSize","retData","isSuccess","errorMsg","list","allCount","error","query","Promise","resolve","reject","callbackUUID","uuid","replace","nativeBridge","sqlite","JSON","stringify","cmd","window","value","ret","parse","result","data","components","cPicGroup","items","isGetingItems","computed","watch","created","mounted","addEventListener","handleScroll","getItems","destroyed","removeEventListener","methods","page","GALLERY_LIST","then","v","splice","length","push","setTimeout","target","document","children","checkNext","catch","event","scrollHeight","clientHeight","scrollTop","component","createSimpleFunctional"],"sourceRoot":""}