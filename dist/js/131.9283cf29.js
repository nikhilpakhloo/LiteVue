"use strict";(self["webpackChunklite"]=self["webpackChunklite"]||[]).push([[131],{5543:function(t,e,s){s.d(e,{A:function(){return a}});var n=function(){var t=this,e=t._self._c;return e("p-base",{attrs:{title:t.$t("collection.delete.check",{name:t.coll}),okTxt:t.$t("common.delete"),cancelTxt:t.$t("common.cancel"),onOk:t.onOk,onCancel:t.onCancel,thema:"default"}},[t._v(" "+t._s(t.$t("collection.delete.check-desc"))+" ")])},o=[],i={props:{onOk:{default:()=>{}},onCancel:{default:()=>{}},coll:{default:null}},data(){return{}},computed:{},watch:{},created(){},mounted(){},destroyed(){},methods:{}},r=i,c=s(1656),l=(0,c.A)(r,n,o,!1,null,"4e36588c",null),a=l.exports},5131:function(t,e,s){s.r(e),s.d(e,{default:function(){return A}});var n=s(1221),o=s(1032),i=function(){var t=this,e=t._self._c;return e("lay-header",{attrs:{showBack:!1,showX:!0,tBarColor:"#FFFFFF",txtTitle:t.$t("collection.edit.title"),txtRight:t.$t("common.done"),onRight:t.onClickActionDone}},[e(o.A,{staticClass:"pa-6 lay-body",attrs:{column:""}},[e("c-input",{attrs:{label:t.$t("collection.reg-title"),hint:t.$t("collection.reg-hint"),value:t.inputName,maxlength:"5"},on:{"update:value":function(e){t.inputName=e}}}),e(o.A,{staticClass:"flex-grow-0 mt-14",attrs:{"align-center":""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),(()=>t.onShowPopupAction(t.pop)).apply(null,arguments)}}},[e("img",{staticClass:"ic-del",attrs:{src:s(2769)}}),e("span",{staticClass:"txt-del"},[t._v(t._s(t.$t("collection.edit.delete")))])]),e("span",{staticClass:"txt-desc"},[t._v(t._s(t.$t("collection.edit.del-desc")))])],1),t.cInfo?e(n.A,{attrs:{persistent:"",width:t.pxToRem(322)},model:{value:t.pop.isShow,callback:function(e){t.$set(t.pop,"isShow",e)},expression:"pop.isShow"}},[e("p-del-coll",{attrs:{onCancel:()=>t.onClosePopupAction(t.pop),onOk:t.onClickActionDel,coll:t.cInfo.collectionName}})],1):t._e()],1)},r=[],c=s(5543),l=s(3548),a=s(8414),u=s.n(a),d=s(7488);const h={request:async(t,e)=>{let s={isSuccess:!1,errorMsg:"",data:null},n=`   \n            UPDATE \n                TB_COLLECTION\n            SET \n                collectionName = '${e}'\n            WHERE\n                collectionId = '${t}'\n        `;try{return await new Promise(((t,e)=>{const o=`API_GETINFO_CALLBACK_${u()().replace(/-/gi,"")}`;d.A.sqlite(JSON.stringify({cmd:"runQuery",query:n}),o),window[`${o}`]=n=>{try{if(n){const e=JSON.parse(n);s.isSuccess=e.result,s.errorMsg=e.error,s.data=e.data&&e.data.length>0?e.data[0]:e.data,t(s)}else e()}catch(i){e(i)}delete window[`${o}`]}}))}catch(o){throw o}}};var p=h,m=s(2511),w={components:{pDelColl:c.A},props:["seq"],data(){return{isGetingItems:!1,inputName:null,pop:{isCreate:!1,isShow:!1},cInfo:null}},computed:{},watch:{},created(){},mounted(){this.getData()},destroyed(){},methods:{async getData(){if(this.isGetingItems)return;this.isGetingItems=!0;let t=await l.A.request(this.seq);this.isGetingItems=!1,t.isSuccess?(this.cInfo=t.data,this.inputName=this.cInfo.collectionName):this.showToast(this.$t("error.error"),!1,!1)},async onClickActionDone(){if(!this.inputName)return void this.showToast(this.$t("collection.reg-hint"));if(this.isGetingItems)return;this.isGetingItems=!0;let t=await p.request(this.seq,this.inputName);this.isGetingItems=!1,t.isSuccess?(this.showToast(this.$t("error.save-comp")),this.$router.go(-1)):this.showToast(this.$t("error.error"),!1,!1)},async onClickActionDel(){if(this.isGetingItems)return;this.isGetingItems=!0,this.onClosePopupAction(this.pop);let t=await m.A.request([this.seq]);this.isGetingItems=!1,t.isSuccess?(this.showToast(this.$t("error.del-comp")),this.$router.go(-2)):this.showToast(this.$t("error.error"),!1,!1)}}},g=w,f=s(1656),C=(0,f.A)(g,i,r,!1,null,"42d32e71",null),A=C.exports},2511:function(t,e,s){var n=s(8414),o=s.n(n),i=s(7488);const r={request:async t=>{let e={isSuccess:!1,errorMsg:"",data:null};if(!t.length)throw"no data";let s=`   \n            DELETE FROM \n                TB_COLLECTION\n            WHERE\n                collectionId IN (${t})\n        `;try{var n=await new Promise(((t,e)=>{const n=`API_GETINFO_CALLBACK_${o()().replace(/-/gi,"")}`;i.A.sqlite(JSON.stringify({cmd:"runQuery",query:s}),n),window[`${n}`]=s=>{try{s?t(s):e()}catch(o){e(o)}delete window[`${n}`]}}));if(JSON.parse(n).result)return new Promise(((s,n)=>{let r=`\n                        DELETE FROM \n                            TB_COLLECTION_MEDIA \n                        WHERE \n                            collectionId IN (${t})\n                    `;const c=`API_GETID_CALLBACK_${o()().replace(/-/gi,"")}`;i.A.sqlite(JSON.stringify({cmd:"runQuery",query:r}),c),window[`${c}`]=t=>{try{if(t){const n=JSON.parse(t);e.isSuccess=n.result,e.errorMsg=n.error,e.data=n.data&&n.data.length>0?n.data[0]:null,s(e)}else n()}catch(o){n(o)}delete window[`${c}`]}}));throw"error"}catch(r){throw r}}};e.A=r},3548:function(t,e,s){var n=s(8414),o=s.n(n),i=s(7488);const r={request:async t=>{let e={isSuccess:!1,errorMsg:"",data:null},s=`   \n            SELECT \n                *\n            FROM \n                TB_COLLECTION \n            WHERE\n                collectionId = ${t}\n        `;return new Promise(((t,n)=>{const r=`API_GETINFO_CALLBACK_${o()().replace(/-/gi,"")}`;i.A.sqlite(JSON.stringify({cmd:"selectQuery",query:s}),r),window[`${r}`]=s=>{try{if(s){const n=JSON.parse(s);e.isSuccess=n.result,e.errorMsg=n.error,e.data=n.data&&n.data.length>0?n.data[0]:null,t(e)}else n()}catch(o){n(o)}delete window[`${r}`]}}))}};e.A=r},2769:function(t,e,s){t.exports=s.p+"img/ic-menu-del.a80b8317.svg"}}]);
//# sourceMappingURL=131.9283cf29.js.map