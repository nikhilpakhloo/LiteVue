"use strict";(self["webpackChunklite"]=self["webpackChunklite"]||[]).push([[501],{3501:function(t,s,e){e.r(s),e.d(s,{default:function(){return _}});var a=e(1032),i=e(1034),n=function(){var t=this,s=t._self._c;return s("lay-header",{attrs:{showBack:!0,tBarColor:"#FFFFFF",txtTitle:t.$t("gallery.my-pic"),isGetingItems:t.isGetingItems}},[s(a.A,{staticClass:"pt-9 px-5 lay-body",attrs:{column:""}},t._l(t.items,(function(n,r){return s(a.A,{key:r,attrs:{column:""}},[0==r||t.items[r-1].startDate.substring(0,6)!==t.items[r].startDate.substring(0,6)?s("span",{staticClass:"txt-month"},[t._v(t._s(t.$t("common.yyyyMM",{year:n.startDate.substring(0,4),month:n.startDate.substring(4,6)})))]):t._e(),s(a.A,{staticClass:"lay-date",attrs:{"align-center":""}},[s("span",{staticClass:"txt-num"},[t._v("#"+t._s(n.logId))]),s("span",{staticClass:"txt-date"},[t._v(t._s(t.getDateFormat(n.startDate)))]),n.majorLocation?s(a.A,[s("img",{staticClass:"ml-2",attrs:{src:e(2045)}}),s("span",{staticClass:"txt-loc"},[t._v(t._s("en"==t.$i18n.locale?n.majorLocationEn:n.majorLocation))])]):t._e(),s(i.A),n.pics&&n.pics.length?s("span",{staticClass:"txt-more",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),(()=>{t.pushRouter({name:"gallList",params:{seq:n.logId}})}).apply(null,arguments)}}},[t._v(t._s(t.$t("gallery.more"))+" ")]):t._e()],1),s("c-pic-group",{attrs:{maxImg:3,logId:n.logId,pics:n.pics},on:{"update:pics":function(s){return t.$set(n,"pics",s)}}})],1)})),1)],1)},r=[],l=(e(4114),e(5549)),c=e(8414),o=e.n(c),u=e(7488),h=e(7334);const m={request:async(t=1,s=5)=>{let e={isSuccess:!1,errorMsg:"",list:null,allCount:0};try{e.allCount=await h.A.request("SELECT COUNT(*) AS cnt FROM TB_LOG","cnt")}catch(i){throw i}let a=`   \n            SELECT \n                *\n            FROM \n                TB_LOG \n            ORDER BY\n                startDate DESC \n            LIMIT ${s} OFFSET ${s*(t-1)}\n        `;return new Promise(((t,s)=>{const n=`API_GETLIST_CALLBACK_${o()().replace(/-/gi,"")}`;u.A.sqlite(JSON.stringify({cmd:"selectQuery",query:a}),n),window[`${n}`]=a=>{try{if(a){const s=JSON.parse(a);e.isSuccess=s.result,e.errorMsg=s.error,e.list=s.data,t(e)}else s()}catch(i){s(i)}delete window[`${n}`]}}))}};var g=m,p={components:{cPicGroup:l.A},data(){return{pageNo:1,allCount:0,items:[],isGetingItems:!1}},computed:{},watch:{},created(){},mounted(){window.addEventListener("scroll",this.handleScroll),this.getItems()},destroyed(){window.removeEventListener("scroll",this.handleScroll)},methods:{async getItems(t=1){this.isGetingItems||(this.isGetingItems=!0,await g.request(t).then((s=>{this.pageNo=t,1==t&&this.items.splice(0,this.items.length),this.allCount=s.allCount,this.items.push(...s.list),this.isGetingItems=!1,setTimeout((()=>{var t=document.children[0];this.checkNext(t)}),300)})).catch((()=>{this.isGetingItems=!1})))},handleScroll(t){let s=t.target.children[0];this.checkNext(s)},checkNext(t){this.items.length<this.allCount&&t&&t.scrollHeight-t.clientHeight-80<t.scrollTop&&this.getItems(this.pageNo+1)}}},d=p,C=e(1656),y=(0,C.A)(d,n,r,!1,null,"aa0b6d46",null),_=y.exports},1034:function(t,s,e){e(158);var a=e(4152);s.A=(0,a.Gn)("spacer","div","v-spacer")},2045:function(t,s,e){t.exports=e.p+"img/ic-location-g.35a8f128.svg"}}]);
//# sourceMappingURL=501.c9ff8c98.js.map