{"version":3,"file":"js/954.71cb3c7b.js","mappings":"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","sources":["webpack://lite/./src/views/coll/list.vue","webpack://lite/./src/bridge/media/out.js","webpack://lite/src/views/coll/list.vue","webpack://lite/./src/views/coll/list.vue?3275","webpack://lite/./src/views/coll/list.vue?d08d","webpack://lite/../../../src/components/VGrid/VSpacer.ts","webpack://lite/./src/bridge/collection/info.js","webpack://lite/./src/bridge/media/collections.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('lay-header',{attrs:{\"showBack\":!_vm.isEditMode,\"showX\":_vm.isEditMode,\"tBarColor\":\"#FFFFFF\",\"onBack\":() => {\n      if (_vm.isEditMode) {\n        _vm.isEditMode = false;\n      } else {\n        _vm.$router.go(-1);\n      }\n    }}},[_c('template',{slot:\"right\"},[(_vm.items && _vm.items.length)?_c('span',{staticClass:\"txt-right\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClickActionEdit.apply(null, arguments)}}},[_vm._v(_vm._s(_vm.isEditMode ? (_vm.items.length == _vm.selectItems.length ? _vm.$t(\"common.select-none\") : _vm.$t(\"common.select-all\")) : _vm.$t(\"common.select\")))]):_vm._e(),(!_vm.isEditMode && _vm.cInfo && _vm.cInfo.favorite != 1)?_c('span',{staticClass:\"txt-right ml-6\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return (() => _vm.pushRouter({ name: 'collEdit', params: { seq: _vm.seq } })).apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.update\"))+\" \")]):_vm._e()]),(_vm.cInfo)?_c('v-layout',{staticClass:\"pt-1 lay-body\",attrs:{\"column\":\"\"}},[_c('span',{staticClass:\"txt-sub\"},[_vm._v(\" \"+_vm._s(_vm.cInfo && _vm.cInfo.favorite == 1 ? _vm.$t(\"collection.like\") : _vm.cInfo.collectionName)+\" \")]),_c('v-layout',{staticClass:\"txt-cnt\"},[_c('span',[_vm._v(_vm._s(_vm.$t(\"collection.info.pic-cnt\", { count: _vm.allCount })))]),_c('v-spacer'),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEditMode),expression:\"!isEditMode\"}],staticClass:\"txt-add\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return (() =>\n            _vm.pushRouter({\n              name: 'collPic',\n              params: { seq: _vm.seq },\n            })).apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.add\"))+\" \")])],1),_c('v-layout',{staticClass:\"flex-grow-0 pb-5 pt-6\",attrs:{\"wrap\":\"\",\"row\":\"\"}},_vm._l((_vm.items),function(item,index){return _c('c-pic',{key:index,attrs:{\"editMode\":_vm.isEditMode,\"src\":item.thumbName + `?${_vm.filterVer}`,\"isVideo\":item.fileType == 'VIDEO',\"duration\":item.videoTime,\"select\":_vm.selectItems.indexOf(item) > -1\n            ? _vm.selectItems.indexOf(item) + 1\n            : null,\"isLike\":item.likeYn == 'Y',\"isFilter\":item.filterd == '1',\"isMemo\":item.memo.title || item.memo.memo,\"onClick\":() => _vm.onClickActionSelect(item),\"mediaId\":item.mediaId}})}),1),_c('transition',{attrs:{\"name\":\"slide-y-reverse-transition\"}},[(_vm.isEditMode)?_c('c-footer',{attrs:{\"height\":\"80\",\"elevation\":\"0\"}},[_c('v-layout',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"lay-footer-menu\",class:[_vm.selectItems.length ? 'select' : ''],attrs:{\"column\":\"\",\"align-center\":\"\",\"justify-center\":\"\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClickActionSave.apply(null, arguments)}}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/ic-menu-down.svg\")}}),_c('span',[_vm._v(_vm._s(_vm.$t(\"common.save\")))])]),_c('v-layout',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"lay-footer-menu\",class:[_vm.selectItems.length ? 'select' : ''],attrs:{\"column\":\"\",\"align-center\":\"\",\"justify-center\":\"\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClickActionFilter.apply(null, arguments)}}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/ic-menu-filter.svg\")}}),_c('span',[_vm._v(_vm._s(_vm.$t(\"common.filter\")))])]),_c('v-layout',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],staticClass:\"lay-footer-menu\",class:[_vm.selectItems.length ? 'select' : ''],attrs:{\"column\":\"\",\"align-center\":\"\",\"justify-center\":\"\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClickActionDel.apply(null, arguments)}}},[_c('img',{attrs:{\"src\":require(\"@/assets/images/ic-menu-del.svg\")}}),_c('span',[_vm._v(_vm._s(_vm.$t(\"common.delete\")))])])],1):_vm._e()],1)],1):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import uuid from \"uuid\";\nimport nativeBridge from \"@/plugins/nativeBridge\";\nconst bridge = {\n    request: (cmIds) => {\n        let retData = {\n            isSuccess: false,\n            errorMsg: '',\n            data: null,\n        };\n        let query =\n        `\n            DELETE FROM \n                TB_COLLECTION_MEDIA \n            WHERE \n                collectionMediaId in (${cmIds})\n        `\n        return new Promise((resolve, reject) => {\n            const callbackUUID = `API_CALLBACK_${uuid().replace(/-/gi, \"\")}`;\n            nativeBridge.sqlite(JSON.stringify({ cmd: \"runQuery\", query: query }), callbackUUID)\n            window[`${callbackUUID}`] = (value) => {\n                if (value) {\n                    const ret = JSON.parse(value);\n                    retData.isSuccess = ret.result\n                    retData.errorMsg = ret.error\n                    retData.data = ret.data\n                    resolve(retData);\n                } else {\n                    reject();\n                }\n                delete window[`${callbackUUID}`];\n            };\n        });\n    }\n}\nexport default bridge","<template>\n  <lay-header\n    :showBack=\"!isEditMode\"\n    :showX=\"isEditMode\"\n    tBarColor=\"#FFFFFF\"\n    :onBack=\"\n      () => {\n        if (isEditMode) {\n          isEditMode = false;\n        } else {\n          $router.go(-1);\n        }\n      }\n    \"\n  >\n    <template slot=\"right\">\n      <span\n        v-if=\"items && items.length\"\n        class=\"txt-right\"\n        @click.prevent.stop=\"onClickActionEdit\"\n        >{{ isEditMode ? (items.length == selectItems.length ? $t(\"common.select-none\") : $t(\"common.select-all\")) : $t(\"common.select\") }}</span\n      >\n      <span\n        v-if=\"!isEditMode && cInfo && cInfo.favorite != 1\"\n        class=\"txt-right ml-6\"\n        @click.prevent.stop=\"\n          () => pushRouter({ name: 'collEdit', params: { seq: seq } })\n        \"\n      >\n        {{ $t(\"common.update\") }}\n      </span>\n    </template>\n    <v-layout column class=\"pt-1 lay-body\" v-if=\"cInfo\">\n      <span class=\"txt-sub\">\n        {{\n          cInfo && cInfo.favorite == 1\n            ? $t(\"collection.like\")\n            : cInfo.collectionName\n        }}\n      </span>\n      <v-layout class=\"txt-cnt\">\n        <span>{{ $t(\"collection.info.pic-cnt\", { count: allCount }) }}</span>\n        <v-spacer />\n        <span\n          v-show=\"!isEditMode\"\n          class=\"txt-add\"\n          @click.prevent.stop=\"\n            () =>\n              pushRouter({\n                name: 'collPic',\n                params: { seq: seq },\n              })\n          \"\n        >\n          {{ $t(\"common.add\") }}\n        </span>\n      </v-layout>\n      <v-layout wrap row class=\"flex-grow-0 pb-5 pt-6\">\n        <c-pic\n          v-for=\"(item, index) in items\"\n          :editMode=\"isEditMode\"\n          :key=\"index\"\n          :src=\"item.thumbName + `?${filterVer}`\"\n          :isVideo=\"item.fileType == 'VIDEO'\"\n          :duration=\"item.videoTime\"\n          :select=\"\n            selectItems.indexOf(item) > -1\n              ? selectItems.indexOf(item) + 1\n              : null\n          \"\n          :isLike=\"item.likeYn == 'Y'\"\n          :isFilter=\"item.filterd == '1'\"\n          :isMemo=\"item.memo.title || item.memo.memo\"\n          :onClick=\"() => onClickActionSelect(item)\"\n          :mediaId=\"item.mediaId\"\n        />\n      </v-layout>\n      <transition name=\"slide-y-reverse-transition\">\n        <c-footer v-if=\"isEditMode\" height=\"80\" elevation=\"0\">\n          <v-layout\n            v-ripple\n            column\n            align-center\n            justify-center\n            class=\"lay-footer-menu\"\n            :class=\"[selectItems.length ? 'select' : '']\"\n            @click.prevent.stop=\"onClickActionSave\"\n          >\n            <img src=\"@/assets/images/ic-menu-down.svg\" />\n            <span>{{ $t(\"common.save\") }}</span>\n          </v-layout>\n          <v-layout\n            v-ripple\n            column\n            align-center\n            justify-center\n            class=\"lay-footer-menu\"\n            :class=\"[selectItems.length ? 'select' : '']\"\n            @click.prevent.stop=\"onClickActionFilter\"\n          >\n            <img src=\"@/assets/images/ic-menu-filter.svg\" />\n            <span>{{ $t(\"common.filter\") }}</span>\n          </v-layout>\n          <v-layout\n            v-ripple\n            column\n            align-center\n            justify-center\n            class=\"lay-footer-menu\"\n            :class=\"[selectItems.length ? 'select' : '']\"\n            @click.prevent.stop=\"onClickActionDel\"\n          >\n            <img src=\"@/assets/images/ic-menu-del.svg\" />\n            <span>{{ $t(\"common.delete\") }}</span>\n          </v-layout>\n        </c-footer>\n      </transition>\n    </v-layout>\n  </lay-header>\n</template>\n\n<script>\nimport cFooter from \"@/components/cFooter.vue\";\nimport CPic from \"@/components/cPic.vue\";\nimport COLL_INFO from \"@/bridge/collection/info\";\nimport MEDIA_LIST from \"@/bridge/media/collections\";\nimport MEDIA_DELETE from \"@/bridge/media/out\";\nexport default {\n  components: { cFooter, CPic },\n  props: [\"seq\"],\n  data() {\n    return {\n      isGetingItems: false,\n      isEditMode: false,\n      selectItems: [],\n      items: [],\n      pageNo: 1,\n      allCount: 0,\n      cInfo: null,\n    };\n  },\n  computed: {},\n  watch: {\n    isEditMode() {\n      this.selectItems.splice(0, this.selectItems.length);\n    },\n  },\n  created() {\n    window.addEventListener(\"scroll\", this.handleScroll);\n  },\n  mounted() {\n    this.getData();\n  },\n  destroyed() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  },\n  methods: {\n    async getData() {\n      if (this.isGetingItems) {\n        return;\n      }\n      this.isGetingItems = true;\n      let res = await COLL_INFO.request(this.seq);\n      this.isGetingItems = false;\n      if (res.isSuccess) {\n        this.cInfo = res.data;\n        this.getItems();\n      } else {\n        this.showToast(this.$t(\"error.error\"), false, false);\n      }\n    },\n    async getItems(page = 1) {\n      if (this.isGetingItems) {\n        return;\n      }\n      this.isGetingItems = true;\n      var eq = [];\n      if (this.seq) {\n        eq.push({ key: \"collectionId\", val: this.seq });\n      }\n      await MEDIA_LIST.request(page, 20, eq)\n        .then((data) => {\n          this.pageNo = page;\n          if (page == 1) {\n            this.items.splice(0, this.items.length);\n          }\n          this.allCount = data.allCount;\n          this.items.push(...data.list);\n          this.isGetingItems = false;\n\n          this.items.forEach(element => {\n            try {\n              this.$set(element, 'memo', JSON.parse(element.memo.replace(/\\n/g, \"\\\\n\")))\n            } catch (error) {\n            }\n          });\n\n          setTimeout(() => {\n            var target = document.children[0];\n            this.checkNext(target);\n          }, 300);\n        })\n        .catch(() => {\n          this.isGetingItems = false;\n        });\n    },\n    handleScroll(event) {\n      let target = event.target.children[0];\n      this.checkNext(target);\n    },\n    checkNext(target) {\n      if (\n        this.items.length < this.allCount &&\n        target &&\n        target.scrollHeight - target.clientHeight - 80 < target.scrollTop\n      ) {\n        this.getItems(this.pageNo + 1);\n      }\n    },\n    checkSelect() {\n      if (!this.selectItems.length) {\n        return false;\n      }\n      return true;\n    },\n    onClickActionEdit() {\n      if (!this.isEditMode) {\n        this.isEditMode = true;\n      } else {\n        if(this.items.length == this.selectItems.length) {\n          this.selectItems.splice(0, this.selectItems.length)\n        } else {\n          this.items.forEach((element) => {\n            if (this.selectItems.indexOf(element) < 0) {\n              this.selectItems.push(element);\n            }\n          });\n        }\n      }\n    },\n    onClickActionSelect(item) {\n      if (this.isEditMode) {\n        if (this.selectItems.indexOf(item) > -1) {\n          this.selectItems.splice(this.selectItems.indexOf(item), 1);\n        } else {\n          this.selectItems.push(item);\n        }\n      } else {\n        this.pushRouter({\n          name: \"media\",\n          params: { seq: item.mediaId, collId: item.collectionId },\n        });\n      }\n    },\n    onClickActionSave() {\n      if (this.checkSelect()) {\n        if (this.isGetingItems) {\n          return;\n        }\n        this.isGetingItems = true;\n        window.onSaveComplete = (res) => {\n          this.isEditMode = false;\n          this.isGetingItems = false;\n          if (res == \"success\") {\n            this.showToast(this.$t(\"error.save-comp\"));\n          } else {\n            this.showToast(this.$t(\"error.error\"), false, false);\n          }\n          delete window.onSaveComplete;\n        };\n        this.nativeBridge.fileDownload(this.selectItems, \"onSaveComplete\");\n      }\n    },\n    onClickActionFilter() {\n      if (this.selectItems.length > this.FILTER_MAX_SIZE) {\n        this.showToast(\n          this.$t(\"error.filter-cnt-error\", { count: this.FILTER_MAX_SIZE }),\n          false,\n          false\n        );\n        return false;\n      }\n      if (this.checkSelect()) {\n        window.onFilterComplete = (res) => {\n          if(res) {\n            this.showToast(this.$t(\"error.filter-comp\"), false, false);\n            this.$store.commit(\"filterVer\", this.filterVer + 1);\n            this.getItems();\n          }\n          this.isEditMode = false;\n          delete window.onFilterComplete;\n        };\n        this.nativeBridge.showFilterView(this.selectItems, \"onFilterComplete\");\n      }\n    },\n    onClickActionDel() {\n      this.showPopup({\n        title: this.$t(\"gallery.edit.select\", {\n          count: this.selectItems.length,\n        }),\n        msg: this.$t(\"collection.media.delete-collection\"),\n        okTxt: this.$t(\"collection.media.btn-delect-all\"),\n        cancelTxt: this.$t(\"collection.media.btn-delect\"),\n        persistent: false,\n        okAction: () => {\n          window.onDeleteComplete = () => {\n            this.isEditMode = false;\n            this.getItems();\n            this.showToast(this.$t(\"error.del-comp\"), false, false);\n            delete window.onDeleteComplete;\n          };\n          this.nativeBridge.fileDelete(this.selectItems, \"onDeleteComplete\");\n        },\n        cancelAction: () => {\n          if (this.isGetingItems) {\n            return;\n          }\n          this.isGetingItems = true;\n          var ids = [];\n          this.selectItems.forEach((element) => {\n            ids.push(element.collectionMediaId);\n          });\n          MEDIA_DELETE.request(ids)\n            .then((data) => {\n              this.isGetingItems = false;\n              if (data.isSuccess) {\n                this.isEditMode = false;\n                this.getItems();\n                this.showToast(this.$t(\"error.del-comp\"), false, false);\n              } else {\n                this.showToast(this.$t(\"error.error\"), false, false);\n              }\n            })\n            .catch(() => {\n              this.isGetingItems = false;\n            });\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/sass/app.scss\";\n.txt-right {\n  font-style: normal;\n  font-weight: 500;\n  font-size: pxToRem(16px);\n  line-height: pxToRem(18px);\n  text-align: right;\n  letter-spacing: -0.02em;\n  color: #000000;\n  z-index: 1;\n}\n.lay-body {\n  .lay-footer-menu {\n    flex: none;\n    width: pxToRem(98px);\n    max-width: 33%;\n    height: 100%;\n    opacity: 0.3;\n    &.select {\n      opacity: 1;\n    }\n    img {\n      width: pxToRem(24px);\n      height: pxToRem(24px);\n    }\n    span {\n      margin-top: pxToRem(8px);\n      font-style: normal;\n      font-weight: 400;\n      font-size: pxToRem(9px);\n      line-height: pxToRem(10px);\n      text-align: center;\n      color: #000;\n    }\n  }\n  .txt-sub {\n    font-family: \"PP Pangram Sans\";\n    font-style: normal;\n    font-weight: 600;\n    font-size: pxToRem(28px);\n    line-height: pxToRem(32px);\n    letter-spacing: -0.022em;\n    color: #000000;\n    padding: 0 pxToRem(20px);\n    margin-top: pxToRem(24px);\n  }\n  .txt-cnt {\n    margin-top: pxToRem(8px);\n    flex: none;\n    span {\n      font-family: \"PP Pangram Sans\";\n      font-style: normal;\n      font-weight: 500;\n      font-size: pxToRem(14px);\n      line-height: pxToRem(16px);\n      letter-spacing: -0.022em;\n      color: #000000;\n      padding: 0 pxToRem(20px);\n      &.txt-add {\n        color: #15d4e0;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=1c443938&scoped=true\"\nimport script from \"./list.vue?vue&type=script&lang=js\"\nexport * from \"./list.vue?vue&type=script&lang=js\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=1c443938&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c443938\",\n  null\n  \n)\n\nexport default component.exports","import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","import uuid from \"uuid\";\nimport nativeBridge from \"@/plugins/nativeBridge\";\n\nconst bridge = {\n    request: async (seq) => {\n        let retData = {\n            isSuccess: false,\n            errorMsg: '',\n            data: null,\n        };\n        let query = `   \n            SELECT \n                *\n            FROM \n                TB_COLLECTION \n            WHERE\n                collectionId = ${seq}\n        `\n        return new Promise((resolve, reject) => {\n            const callbackUUID = `API_GETINFO_CALLBACK_${uuid().replace(/-/gi, \"\")}`;\n            nativeBridge.sqlite(JSON.stringify({ cmd: \"selectQuery\", query: query }), callbackUUID)\n            window[`${callbackUUID}`] = (value) => {\n                try {\n                    if (value) {\n                        const ret = JSON.parse(value);\n                        retData.isSuccess = ret.result\n                        retData.errorMsg = ret.error\n                        retData.data = ret.data && ret.data.length > 0 ? ret.data[0] : null\n                        resolve(retData);\n                    } else {\n                        reject();\n                    }\n                } catch (error) {\n                    reject(error);\n                }\n                delete window[`${callbackUUID}`];\n            };\n        });\n    }\n}\nexport default bridge","import uuid from \"uuid\";\nimport nativeBridge from \"@/plugins/nativeBridge\";\nimport allCount from \"../count\";\n\nconst bridge = {\n    request: async (pageNo = 1, pageSize = 20, equals) => {\n        let retData = {\n            isSuccess: false,\n            errorMsg: '',\n            list: null,\n            allCount: 0\n        };\n        let cq = `\n            SELECT \n                COUNT(cm.collectionId) AS cnt \n            FROM \n                TB_COLLECTION_MEDIA cm\n            LEFT JOIN\n                TB_MEDIA m\n            ON\n                m.mediaId = cm.mediaId AND m.deleted = 0\n            WHERE \n                m.deleted = 0\n            AND \n                cm.deleted = 0\n        ` \n        let query = `\n            SELECT \n               *\n            FROM \n                TB_COLLECTION_MEDIA cm\n            LEFT JOIN\n                (\n                    SELECT \n                        mm.*,\n                        CASE WHEN(COUNT(cmm.collectionMediaId) > 0) THEN 'Y' ELSE 'N' END as likeYn\n                    FROM \n                        TB_MEDIA mm\n                    LEFT JOIN\n                        TB_COLLECTION_MEDIA cmm\n                    ON\n                        mm.mediaId = cmm.mediaId \n                        AND cmm.collectionId = 1 \n                        AND cmm.deleted = 0\n                    GROUP BY \n                        mm.mediaId\n                ) m\n            ON\n                m.mediaId = cm.mediaId AND m.deleted = 0\n            WHERE \n                m.deleted = 0\n            AND \n                cm.deleted = 0\n        `\n        if (equals && equals.length) {\n            equals.forEach(element => {\n                query += ` AND ${element.key} = '${element.val}' `\n                cq += ` AND ${element.key} = '${element.val}' `\n            });\n        }\n        query += `   \n            ORDER BY \n                cm.createDate DESC\n            LIMIT ${pageSize} OFFSET ${pageSize * (pageNo - 1)}\n        `\n        try {\n            retData.allCount = await allCount.request(cq, \"cnt\")\n        } catch (error) {\n            throw error\n        }\n        return new Promise((resolve, reject) => {\n            const callbackUUID = `API_GETLIST_CALLBACK_${uuid().replace(/-/gi, \"\")}`;\n            nativeBridge.sqlite(JSON.stringify({ cmd: \"selectQuery\", query: query }), callbackUUID)\n            window[`${callbackUUID}`] = (value) => {\n                try {\n                    if (value) {\n                        const ret = JSON.parse(value);\n                        retData.isSuccess = ret.result\n                        retData.errorMsg = ret.error\n                        retData.list = ret.data\n                        resolve(retData);\n                    } else {\n                        reject();\n                    }\n                } catch (error) {\n                    reject(error);\n                }\n                delete window[`${callbackUUID}`];\n            };\n        });\n    }\n}\nexport default bridge"],"names":["attrs","isEditMode","$router","on","$event","preventDefault","stopPropagation","staticClass","_vm","params","apply","_c","count","allCount","directives","name","rawName","value","key","index","thumbName","selectItems","item","memo","onClickActionSelect","mediaId","class","require","onClickActionFilter","length","onClickActionDel","$t","render","bridge","request","cmIds","retData","isSuccess","errorMsg","data","query","Promise","resolve","reject","callbackUUID","uuid","replace","nativeBridge","sqlite","JSON","stringify","cmd","window","ret","parse","result","error","components","cFooter","CPic","props","isGetingItems","items","pageNo","cInfo","computed","watch","splice","created","addEventListener","handleScroll","mounted","getData","destroyed","removeEventListener","methods","res","COLL_INFO","seq","getItems","showToast","page","eq","push","val","MEDIA_LIST","then","list","forEach","element","$set","setTimeout","target","document","children","checkNext","catch","event","scrollHeight","clientHeight","scrollTop","checkSelect","onClickActionEdit","indexOf","pushRouter","collId","collectionId","onClickActionSave","onSaveComplete","fileDownload","FILTER_MAX_SIZE","onFilterComplete","$store","commit","filterVer","showFilterView","showPopup","title","msg","okTxt","cancelTxt","persistent","okAction","onDeleteComplete","fileDelete","cancelAction","ids","collectionMediaId","MEDIA_DELETE","component","staticRenderFns","createSimpleFunctional","async","pageSize","equals","cq"],"sourceRoot":""}